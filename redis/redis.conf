################################### GENERAL ###################################
# Set the port Redis will listen on.
port 6379

# Bind Redis to specific IP addresses. Use "127.0.0.1" for local-only access.
# In production, set this to the IP address of your Redis server or use "0.0.0.0" to bind to all.
bind 127.0.0.1 ::1

# Enable protected mode for additional security.
protected-mode yes

################################## SECURITY ##################################
# Require a password for clients to connect.
requirepass ${REDIS_PASSWORD}

# Disable dangerous commands in production to prevent misuse (optional).
rename-command FLUSHALL ""
rename-command CONFIG ""
rename-command SHUTDOWN ""

################################ PERSISTENCE ################################
# Save data to disk every 900 seconds (15 minutes) if at least 1 key changes.
save 900 1

# Save data to disk every 300 seconds (5 minutes) if at least 10 keys change.
save 300 10

# Save data to disk every 60 seconds (1 minute) if at least 10,000 keys change.
save 60 10000

# Directory where snapshot files will be stored.
dir /data

# RDB file name for snapshots.
dbfilename dump.rdb

# Use AOF for better durability (optional, recommended for critical data).
appendonly yes
appendfilename "appendonly.aof"

# Perform AOF rewrites only when file grows by 100% since the last rewrite.
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

################################## MEMORY ###################################
# Set a memory limit to prevent Redis from using too much memory.
# Comment out if no limit is required.
maxmemory 256mb

# Eviction policy when maxmemory is reached.
# Options: noeviction, allkeys-lru, volatile-lru, allkeys-random, volatile-random, volatile-ttl.
maxmemory-policy allkeys-lru

################################## NETWORK ###################################
# Set a timeout for idle client connections (in seconds). Use 0 for no timeout.
timeout 300

# Enable TCP keepalive with a 300-second interval.
tcp-keepalive 300

################################### LOGGING ##################################
# Set the log level. Options: debug, verbose, notice, warning.
loglevel notice

# Path to the log file. Use "stdout" for console output.
logfile "stdout"

################################ CLUSTERING ##################################
# Enable Redis clustering (useful for scaling).
cluster-enabled no

################################## MONITORING ################################
# Enable the slow query log to log commands that exceed the given execution time.
# Log commands taking longer than 10ms.
slowlog-log-slower-than 10000

# Maximum number of slow log entries.
slowlog-max-len 128

################################# ADVANCED ###################################
# Disable Redis latency monitoring by default. Enable when debugging latency issues.
latency-monitor-threshold 0

# Disable active rehashing to reduce CPU usage in production.
activerehashing no

################################## INCLUDE ###################################
# Include additional configuration files if needed (e.g., custom settings per environment).
# include /path/to/another/redis.conf

